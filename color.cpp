/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/*|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
LineRun V1 beta||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
Done by: tornado_way|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
(C)2010||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||*/
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#include "color.h"

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#define BOUND_INTEGER(var,min,max) if((var)>(max)){(var)=(max);};if((var)<(min)){(var)=(min);}
ColorManager colorList;

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void ColorManager::init()
{
	indexes.clear();
	list.clear();
	insertpos = 0;
	add("terror"     ,255, 40, 40                    ); // index: 0
	add("counter"    , 60,100,255                    ); // index: 1
	add("esp"        ,255,255,255                    ); // index: 2
	add("special"    ,155,155,155                    ); // index: 3
	add("info"     ,255,255,255,50                   ); // index: 4
	add("radar"      ,102,51, 204                    ); // index: 5
	add("inter1"      ,202,51, 224,250               ); // index: 6
	add("inter2"      , 0,0,0,0                      ); // index: 7
	add("con_text1"   ,255,255, 30,255               ); // index: 8
	add("con_text2"  ,160,160,222,128                ); // index: 9
	add("con_edit"   ,255,255,255,128                ); // index: 10
	add("snake"       ,102,204, 51                   ); // index: 11
	add("hud"       ,110, 20, 220,255                ); // index: 12
	add("line"       ,75, 0, 130,255                 ); // index: 13
} 

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

static void FillColorEntry(ColorEntry& tmp)
{
	tmp.compiled = (tmp.r<<24) + (tmp.g<<16) + (tmp.b<<8) + tmp.a;
	tmp.fr= float(tmp.r)/255.0/30.0;
	tmp.fg= float(tmp.g)/255.0/30.0;
	tmp.fb= float(tmp.b)/255.0/30.0;
	tmp.onebased_r=float(tmp.r)/255.0;
	tmp.onebased_g=float(tmp.g)/255.0;
	tmp.onebased_b=float(tmp.b)/255.0;
	tmp.onebased_a=float(tmp.a)/255.0;
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void ColorManager::add(const char* name,int r, int g, int b, int a)
{
	indexes.add(name,insertpos);
	ColorEntry tmp;
	tmp.r=r;
	tmp.g=g;
	tmp.b=b;
	tmp.a=a;
	FillColorEntry(tmp);
	list.push_back(tmp);
	insertpos++;
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void ColorManager::set(char* name, char* red, char* green, char* blue, char* alpha)
{
	if( !indexes.find(name) ){ return; }
	int index = indexes.num;
	char format[]="%d";
	ColorEntry tmp;
	sscanf(red   ,format,&tmp.r);
	sscanf(green ,format,&tmp.g);
	sscanf(blue  ,format,&tmp.b);
	sscanf(alpha ,format,&tmp.a);
	FillColorEntry(tmp);
	BOUND_INTEGER(index,0,(list.size()-1));
	list[index] = tmp;
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

